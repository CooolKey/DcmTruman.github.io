---
title: cm_2019年8月1日
tags: 
  - 每日总结
  - 主席树
  - 数据结构
  - cm
categories:
  - cm
  - 日报
date: 2019-8-1
---

# 上午

挑了几道题，同时补了一下之前在codeforces上遇到的一个题，标答给的做法是名次树，treap，实现使用stl，也因此，`treap`成了我这几天特别想学习的东西（之一），这个周末如果不忙，会去看看。

当然也有一种离线做法，需要提前处理出来询问，按照从小到大的顺序在权值线段树上询问和更新，也比较好理解，但是，今天还看到一个很棒的做法，代码量非常少，改天有空会专门写一下题解。

# 下午

吃完午饭后，和师弟开始研究习题，今天下午的学习方法是这样的，重点培养对于数据结构这一类题的思维能力，暂时先不开始敲（俗称，嘴巴ac）毕竟放在下午的话，可能思维上会了，但是调试一下午就很没有效率，我晚上或者其他空闲时间，在主要开始切一些这样的题。

看了很多bzoj的题，收获还是很多的，想大概说一下
<!-- more -->
## Bzoj-2653

这道题很有意思，也加深了我对「可持久化线段树」的理解。

题目大意是，左端点给你一个可选范围，右端点给你一个可选范围，然后你决定左右端点，使得其形成的区间的中位数最大。

我想到二分中位数了，想着根据当前中位数，判断一下 左右区间+中间区间 能不能构成我这种中位数情况，说白了就是看一下比当前值`x`大的有多少个数，比`x`小的有多少个数，但由于是连续选取，所以突然有点懵不知道该怎么维护。

后来师弟说**线段树最大连续子段和**之后，再利用+1、-1这种数值记录的方式。仿佛有了点眉目。

题解做法是，初始一颗线段树，每个叶子结点是当前位置对应的信息，初始是全为+1，然后对于原序列，按照数值从小到大的顺序，更新这个线段树，每次更新，都去更新其在原数组中的位置，将其置位-1。

这样一来，对于任何一个在数组中的值，我都有一个包含区间信息的+1，-1线段树，更新使用可持久化思想，每次只更新部分信息，根据二分的值我们在此二分能找到一个与之对应的中位数，得到这个中位数下的求最大子段信息。

具体代码和做法，之后会补上。

很多人的解题博客上写着「主席树」，我觉得并不妥当，在这里向和传统主席树的应用做个比较。

| |区间第k大|此题|
|---|---- | ---- |
| 维护信息 | 值域上每个数的分布 | 每个版本原数组区间的信息 |
| 根节点信息 | 将区间序列表示成一种有序的时间更新序列 | 按照数值排序，不断修改线段树，更新部分信息 |
| 利用 | 利用可减性，将「历史版本」变成「区间信息」 | 比较纯粹的「可持久化」思想，为了使用许多个不同版本的线段树 |



## Bzoj-3932

求区间前k小的和，这一部分不多说了，之所以也写在日报里是一个地方出了笔误，**本来应该求左儿子的节点个数信息，我写成当前儿子了，实在是坑死我了**

其实主席树的一个特点，也可以让我们更好的去思考这类题，每次更新都是一个点，我们见到这样的题，完全可以先考虑，在这道题中，有没有什么操作是单点或者能转换成单点操作的。比如本题中，虽然线段是覆盖，但可以看成是左端点+一个值，右端点-一个值，就能按照题目中与时间有个的关键点维护权值线段树，得到不同时间点的前k大的和。

对于输入中任何一个时间点，二分找到小于等于它的最大的那个时间点，根据其对应的权值线段树，得到答案。

## Bzoj-3123

启发式合并，一开始看到之后想过能不能暴力这么搞，但因为自己太菜+经验不足，就自我否定了这个想法，后来看到这个题的tag，才恍然大悟。

时候诸葛亮一下，又是始终保证森林，又是树上一个点接到另一个上面，明示合并能搞啊，这部分的复杂度$log_{2}n$，不该怂的，真的很巧妙啊。

---

等下准备去更新一下 **acm错误统计**，然后睡觉！ 

